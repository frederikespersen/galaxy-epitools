<tool id="space2" name="Cluster Abs with SPACE2" version="1.0">

    <description> by epitopes through structural profiling of antibodies</description>

    <requirements>
        <requirement type="package">pip</requirement>
        <requirement type="package" version="2.2.3">pandas</requirement>
        <requirement type="package" version="1.26.4">numpy</requirement>
    </requirements>

    <command><![CDATA[
    git clone https://github.com/fspoendlin/SPACE2.git -q;
    pip install SPACE2/ -q;
    python $__tool_directory__/space2.py 
        --input-pdbs
            #for $pdb in $input_pdbs 
                $pdb
            #end for
        --output-tsv $output_tsv;
    ]]></command>

    <inputs>
        <param argument="--input-pdbs" type="data" multiple="true" format="pdb" label="Input Ab PDBs" help="PDB files of antibody structures generated by ABodyBuilder2"/>
    </inputs>

    <outputs>
        <data name="output_tsv" format="tabular" label="${tool.name}: Epitope Clustering"/>
    </outputs>

    <help><![CDATA[
    
.. class:: infomark.

**What it does**

This tools takes a collection of PDB files generated by ABodyBuilder2 and clusters them by epitope using the SPACE2 model.
    
    ]]></help>
    
    <citations>
        <citation type="bibtex">@article{Spoendlin2023,
            title = {Improved computational epitope profiling using structural models identifies a broader diversity of antibodies that bind the same epitope},
            author = {Fabian C. Spoendlin, Brennan Abanades, Matthew I. J. Raybould, Wing Ki Wong, Guy Georges, and Charlotte M. Deane},
            journal = {Frontiers in Molecular Biosciences},
            doi = {10.3389/fmolb.2023.1237621},
            volume = {10},
            year = {2023},
        }</citation>
        <citation type="doi">10.1038/s41586-020-2649-2</citation>
        <citation type="doi">10.5281/zenodo.3509134</citation>
    </citations>

</tool>